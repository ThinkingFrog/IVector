# Интерфейсы

## Сборка библиотеки

Для того, чтобы можно было использовать функции динамической библиотеки, нужно пометить их соответствующим атрибутом при компиляции.

Эта операция выполняется автоматически при сборке проекта при указании флага `-DBUILD_INTERFACES`. Этот флаг определяет макрос `BUILD_INTERFACES`, наличие которого сигнализирует о сборке библиотеки. За возможность автоматически помечать нужным атрибутом функции динамической библиотеки отвечает [этот заголовочный файл](https://github.com/ThinkingFrog/IVector/blob/main/include/Interfacedllexport.h).

В `Code::Blocks` можно указать этот флаг с помощью настроек проекта: `Project -> Build options -> Compiler settings -> #defines`.

В `CLion` это можно сделать, указав в файле `CMakeLists.txt` команду `add_definitions(-DBUILD_INTERFACES)`.

В `Visual Studio` это можно сделать в настройках проекта `Project Settings -> C/C++ -> Preprocessor -> Preprocessor definitions`.

## <a name="logger"></a>ILogger

[Интерфейс для логгера](https://github.com/ThinkingFrog/IVector/blob/main/include/ILogger.h). Используется для протоколирования действий и ошибок.
Связанный с ним [класс ошибок](https://github.com/ThinkingFrog/IVector/blob/main/include/RC.h).

### Описание интерфейса

| Метод: `createLogger` | |
|---|---|
| Описание:| Создаёт экземпляр логгера для вывода ошибок в стандартный вывод. |
| Параметры: | Нет параметров. |
| Возвращаемое значение:| Указатель на экземпляр логгера или `nullptr`, если не удалось создать. |

| Метод: `createLogger` | |
|---|---|
| Описание:| Создаёт экземпляр логгера для вывода ошибок в указанный файл. |
| Параметры: | `filename` - имя файла, куда будет выполняться вывод, <br />`overwrite` - флаг, означающий необходимость перезаписи файла, если он существует, иначе данные в файл будут дописаны. Имеет значение по умолчанию `true`. |
| Возвращаемое значение:| Указатель на экземпляр логгера или `nullptr`, если не удалось создать. |

| Метод: `log` | |
|---|---|
| Описание:| Основной метод вывода ошибок. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`level` - [уровень ошибки](#level), <br />`srcfile` - имя файла, в котором произошла ошибка, <br />`function` - функция, в которой произошла ошибка, <br />`line` - строка, в которой произошла ошибка. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `log` | |
|---|---|
| Описание:| Дополнительный вариант метода `log` для случая, когда не требуется выводить информацию о месте возникновения ошибки. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`level` - [уровень ошибки](#level). |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `severe` | |
|---|---|
| Описание:| Аналог метода `log` с фиксированным [уровнем ошибки](#level) `SEVERE`. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`srcfile` - имя файла, в котором произошла ошибка, <br />`function` - функция, в которой произошла ошибка, <br />`line` - строка, в которой произошла ошибка. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `severe` | |
|---|---|
| Описание:| Дополнительный вариант метода `severe` для случая, когда не требуется выводить информацию о месте возникновения ошибки. |
| Параметры: | `code` - код ошибки из класса ошибок. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `warning` | |
|---|---|
| Описание:| Аналог метода `log` с фиксированным [уровнем ошибки](#level) `WARNING`. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`srcfile` - имя файла, в котором произошла ошибка, <br />`function` - функция, в которой произошла ошибка, <br />`line` - строка, в которой произошла ошибка. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `warning` | |
|---|---|
| Описание:| Дополнительный вариант метода `warning` для случая, когда не требуется выводить информацию о месте возникновения ошибки. |
| Параметры: | `code` - код ошибки из класса ошибок. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `info` | |
|---|---|
| Описание:| Аналог метода `log` с фиксированным [уровнем ошибки](#level) `INFO`. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`srcfile` - имя файла, в котором произошла ошибка, <br />`function` - функция, в которой произошла ошибка, <br />`line` - строка, в которой произошла ошибка. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `info` | |
|---|---|
| Описание:| Дополнительный вариант метода `info` для случая, когда не требуется выводить информацию о месте возникновения ошибки. |
| Параметры: | `code` - код ошибки из класса ошибок. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

<a name="level"></a>

| Перечисление: `Level` | |
|---|---|
| Описание: | Описывает уровни ошибок. |
| Элементы: | `SEVERE` - критическая ошибка, программа прекращает работу, продолжение работы не гарантирует определённое поведение; <br />`WARNING` - некритическая ошибка; <br />`INFO` - информация. |

## IVector

[Интерфейс для вектора](https://github.com/ThinkingFrog/IVector/blob/main/include/IVector.h) - элемент n-мерного евклидова пространства.

### Аксиомы типа:
- элементы - `double` - не могут быть NaN, Inf, -Inf.
- размерность пространства, которому принадлежит вектор, не может быть меньше или равна `0`.

Аксиомы должны выполняться в любой момент времени (например, после выполнения любой операции над вектором). Если некая операция приводит к образованию вектора с невалидными коэффициентами, то такая операция должна вернуть исходное состояние вектора, либо, если она создавала новый вектор, вместо нового вектора выдать `nullptr`.

### Описание интерфейса:

| Метод: `createVector` | |
|---|---|
| Описание:| Создаёт экземпляр вектора.|
| Параметры: | `dim` - размерность вектора, <br />`ptr_data` - указатель на массив `double`, который определяет элементы вектора. Его размер равен `dim`. |
| Возвращаемое значение:| Указатель на экземпляр вектора или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `copyInstance` | |
|---|---|
| Описание: | Копирует представление одного вектора в другой, если это допустимо. Допустимостью является равенство объёмов памяти и не пересечение блоков памяти, выделенных под объекты. Разрешены только указатели на валидные экземпляры вектора, иначе поведение не определено. |
| Параметры: | `dest` - указатель на вектор, куда совершается копирование, <br />`src` - указатель на вектор, откуда совершается копирование. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха;  <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MEMORY_INTERSECTION`, если блоки памяти пересекаются; <br />`INVALID_ARGUMENT`, если блоки памяти не подходят по размеру. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `moveInstance` | |
|---|---|
| Описание: | Копирует представление одного вектора в другой, если это допустимо, и удаляет источник данных. Допустимостью является равенство объёмов памяти и не пересечение блоков памяти, выделенных под объекты. Разрешены только указатели на валидные экземпляры вектора, иначе поведение не определено. |
| Параметры: | `dest` - указатель на вектор, куда совершается копирование, <br />`src` - указатель на вектор, откуда совершается копирование. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MEMORY_INTERSECTION`, если блоки памяти пересекаются; <br />`INVALID_ARGUMENT`, если блоки памяти не подходят по размеру. <br />Подробная информация пишется в [логгер](#vectorlogger). |

<a name="vectorSize"></a>

| Метод: `sizeAllocated` | |
|---|---|
| Описание: | Возвращает объём памяти в байтах, выделенный на хранение вектора как единого блока памяти. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Количество байт, которое занимает экземпляр вектора. |

__Факт того, что тип реализует операции `copyInstance`, `moveInstance` говорит о том, что экземпляры этого типа можно копировать и перемещать как сырую память размером `sizeAllocated` байт.__

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию вектора, у которого вызван метод. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр вектора или `nullptr`, если не удалось выделить память. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `getData` | |
|---|---|
| Описание: | Возвращает указатель на массив элементов вектора. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на неизменяемый массив `double` - элементы вектора. |

| Метод: `setData` | |
|---|---|
| Описание: | Устанавливает новые значения элементов вектора. |
| Параметры: | `dim` - количество элементов массива, <br />`ptr_data` - указатель на массив `double`, который определяет новые элементы вектора. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора не совпала с размером массива; <br />Или информация о невалидности элементов: <br />`NOT_NUMBER` - среди элементов есть NaN, <br />`INFINITY_OVERFLOW` - среди элементов есть Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

<a name="vectorlogger"></a>

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для вектора. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getLogger` | |
|---|---|
| Описание: | Возвращает [логгер](#logger), установленный для вектора. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр логгера или `nullptr`, если логгер не был установлен. |

| Метод: `getCord` | |
|---|---|
| Описание: | Записывает конкретную компоненту вектора в переменную, переданную по ссылке. |
| Параметры: | `index` - индекс элемента вектора, <br />`val` - ссылка на `double` - контейнер под элемент вектора. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит множеству индексов вектора. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `setCord` | |
|---|---|
| Описание: | Устанавливает конкретной компоненте вектора новое значение. |
| Параметры: | `index` - индекс элемента вектора, <br />`val` - новое значение элемента. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит множеству индексов вектора; <br />Или информация о невалидности нового значения элемента: <br />`NOT_NUMBER` - новый элемент является NaN, <br />`INFINITY_OVERFLOW` - новый элемент является Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `scale` | |
|---|---|
| Описание: | Увеличивает каждую компоненту вектора в `multiplier` раз. |
| Параметры: | `multiplier` - множитель, на который умножается каждая компонента. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />Или информация о невалидности элементов получаемого вектора: <br />`NOT_NUMBER` - среди элементов есть NaN, <br />`INFINITY_OVERFLOW` - среди элементов есть Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `getDim` | |
|---|---|
| Описание: | Возвращает размерность вектора. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Размерность вектора. |

| Метод: `inc` и `dec` | |
|---|---|
| Описание: | Складывает/вычитает переданный вектор с текущим, из которого вызван метод. Аналоги `+=` и `-=`. |
| Параметры: | `op` - вектор, который будет добавлен к исходному/ вычтен из исходного, у которого вызван метод. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность векторов не совпала; <br />Или информация о невалидности элементов получаемого вектора: <br />`NOT_NUMBER` - среди элементов есть NaN, <br />`INFINITY_OVERFLOW` - среди элементов есть Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `add` | |
|---|---|
| Описание: | Создаёт новый вектор, который является суммой двух передаваемых векторов. |
| Параметры: | `op1` и `op2` - векторы-слагаемые. |
| Возвращаемое значение: | Новый вектор, являющийся суммой передаваемых, или `nullptr` в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `sub` | |
|---|---|
| Описание: | Создаёт новый вектор, который является разностью двух передаваемых векторов. |
| Параметры: | `op1` - уменьшаемое, `op2` - вычитаемое. |
| Возвращаемое значение: | Новый вектор, являющийся разностью передаваемых или `nullptr` в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `dot` | |
|---|---|
| Описание: | Вычисляет скалярное произведение двух векторов. |
| Параметры: | `op1` и `op2` - векторы - аргументы скалярного произведения. |
| Возвращаемое значение: | Значение скалярного произведения или тихий NAN в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `equals` | |
|---|---|
| Описание: | Сравнивает векторы с заданной точностью и заданной метрикой. |
| Параметры: | `op1` и `op2` - сравниваемые векторы, <br />`n` - [норма](#vectorNorm), по которой будет измерена разность векторов,  <br />`tol` - точность сравнения. |
| Возвращаемое значение: | `true`, если векторы равны с данной точностью по данной метрике, и `false`, если не равны. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `norm` | |
|---|---|
| Описание: | Вычисляет норму вектора. |
| Параметры: | `n` - [норма](#vectorNorm). |
| Возвращаемое значение: | Значение нормы или тихий NAN в случае ошибки. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `applyFunction` | |
|---|---|
| Описание: | Изменяет компоненты вектора согласно переданной функции. |
| Параметры: | `fun` - функция <img src="https://render.githubusercontent.com/render/math?math=\color{red}f: \mathbb{R} \rightarrow \mathbb{R}"> (`double(double)`), определяющая изменение каждой компоненты: `el = fun(el)`. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />Или информация о невалидности элементов получаемого вектора: <br />`NOT_NUMBER` - среди элементов есть NaN, <br />`INFINITY_OVERFLOW` - среди элементов есть Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `foreach` | |
|---|---|
| Описание: | Выполняет процедуру над каждой компонентой вектора. |
| Параметры: | `fun` - процедура (`void(double)`), определяющая обработку каждой компоненты вектора. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха. |

<a name="vectorNorm"></a>

| Перечисление: `NORM` | |
|---|---|
| Описание: | Описывает нормы, которые поддерживаются реализацией вектора. |
| Элементы: | `CHEBYSHEV` - бесконечная p-норма. Чебышевская норма; <br />`FIRST` - первая p-норма. Манхэттенская норма; <br />`SECOND` - вторая p-норма. Евклидова норма; <br />`AMOUNT` - количество норм в перечислении. |

### Замечания по реализации:

- Реализация вектора подобна массиву примитивов - один непрерывный блок памяти, содержащий элементы вектора и метаинформацию о векторе. Клиентский код должен иметь возможность получить размер блока из [метода](#vectorSize) `sizeAllocated`.
- Деструктор чисто виртуальный намеренно, чтобы подчеркнуть абстрактность типа `IVector`

## ISet

[Интерфейс для контейнера - множество векторов](https://github.com/ThinkingFrog/IVector/blob/main/include/ISet.h), которые хранятся в хронологической последовательности. Множество хранит векторы одной размерности, которая определяется первым вектором, переданным на хранение.

### Описание интерфейса:

| Метод: `createSet` | |
|---|---|
| Описание:| Создаёт экземпляр множества.|
| Параметры: | Параметров нет. |
| Возвращаемое значение:| Указатель на экземпляр множества или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию множества, у которого вызван метод. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр множества или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#setlogger). |

<a name="setlogger"></a>

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для множества. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getLogger` | |
|---|---|
| Описание: | Возвращает [логгер](#logger), установленный для множества. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр логгера или `nullptr`, если логгер не был установлен. |

| Метод: `makeIntersection` | |
|---|---|
| Описание: | Создаёт новое множество как пересечение двух множеств. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества для построения пересечения, <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов,  <br />`tol` - точность сравнения. |
| Возвращаемое значение: | Новое множество, являющееся пересечением, или `nullptr` в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `makeUnion` | |
|---|---|
| Описание: | Создаёт новое множество как объединение двух множеств. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества для построения объединения, <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов,  <br />`tol` - точность сравнения. |
| Возвращаемое значение: | Новое множество, являющееся объединением, или `nullptr` в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `sub` | |
|---|---|
| Описание: | Создаёт новое множество как разность двух множеств. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества для построения разности (`op1` является уменьшаемым, `op2` - вычитаемым), <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов,  <br />`tol` - точность сравнения. |
| Возвращаемое значение: | Новое множество, являющееся разностью, или `nullptr` в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `symSub` | |
|---|---|
| Описание: | Создаёт новое множество как симметрическую разность двух множеств. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества для построения симметрической разности, <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов,  <br />`tol` - точность сравнения. |
| Возвращаемое значение: | Новое множество, являющееся симметрической разностью, или `nullptr` в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `equals` | |
|---|---|
| Описание: | Сравнивает два множества. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - сравниваемые множества, <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов,  <br />`tol` - точность сравнения. |
| Возвращаемое значение: | `true`, если множества равны с данной точностью по данной метрике, и `false`, если не равны. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `subSet` | |
|---|---|
| Описание: | Проверяет, является ли множство `op1` подмножеством `op2`. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества для проверки на вложенность, <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов,  <br />`tol` - точность сравнения. |
| Возвращаемое значение: | `true`, если `op1` является подмножеством `op2`, и `false`, если не является. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getDim` | |
|---|---|
| Описание: | Возвращает размерность векторов в множестве. Если во множество ещё ни один вектор не был добавлен, возвращает `0`. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Размерность векторов в множестве. |

| Метод: `getSize` | |
|---|---|
| Описание: | Возвращает количество векторов в множестве. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Количество векторов в множестве. |

| Метод: `findFirst` | |
|---|---|
| Описание: | Проверяет наличие во множестве вектора, равного данному по заданной норме с некоторой точностью. |
| Параметры: | `pat` - данный вектор для поиска в множестве, <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов,  <br />`tol` - точность сравнения. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `pat` не совпала с размерностью множества; <br />`VECTOR_NOT_FOUND`, если не удалось найти вектор; <br />`INVALID_ARGUMENT`, если аргумент имеет недопустимое значение (`NORM::AMOUNT` или `tol < 0.0`); <br />Или информация о невалидности точности: <br />`NOT_NUMBER` - точность является NAN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getCopy` | |
|---|---|
| Описание: | Возвращает копию вектора по индексу. Метод записывает в переданный по ссылке указатель адрес копии вектора. |
| Параметры: | `index` - индекс вектора, <br />`val` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит индексам множества; <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `findFirstAndCopy` | |
|---|---|
| Описание: | Находит первый вектор, равный данному с некоторой точностью. Метод записывает в переданный по ссылке указатель адрес копии найденного вектора. |
| Параметры: | `pat` - вектор для поиска в множестве, <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов;  <br />`tol` - точность сравнения, <br />`val` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `pat` не совпала с размерностью множества; <br />`VECTOR_NOT_FOUND`, если не удалось найти вектор; <br />`INVALID_ARGUMENT`, если аргумент имеет недопустимое значение (`NORM::AMOUNT` или `tol < 0.0`); <br />Или информация о невалидности точности: <br />`NOT_NUMBER` - точность является NAN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getCoords` | |
|---|---|
| Описание: | Записывает элементы вектора указанного индекса в буферный вектор. |
| Параметры: | `index` - индекс вектора, <br />`val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит индексам множества; <br />`MISMATCHING_DIMENSIONS`, если размерность буферного вектора `val` не совпала с размерностью множества. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `findFirstAndCopyCoords` | |
|---|---|
| Описание: | Находит первый вектор, равный данному с некоторой точностью. Метод записывает элементы найденного вектора в буферный вектор. |
| Параметры: | `pat` - вектор для поиска в множестве, <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов,  <br />`tol` - точность сравнения, <br />`val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `pat` или `val` не совпала с размерностью множества; <br />`VECTOR_NOT_FOUND`, если не удалось найти вектор; <br />`INVALID_ARGUMENT`, если аргумент имеет недопустимое значение (`NORM::AMOUNT` или `tol < 0.0`); <br />Или информация о невалидности точности: <br />`NOT_NUMBER` - точность является NAN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `insert` | |
|---|---|
| Описание: | Добавляет новый вектор в множество, если такого вектора в множестве нет. Сравнение происходит по норме с некоторой точностью. |
| Параметры: | `val` - вектор для добавления в множество, <br />`n` - [норма](#vectorNorm), используемая для сравнения векторов,  <br />`tol` - точность сравнения. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `val` не совпала с размерностью множества; <br />`VECTOR_ALREADY_EXIST`, если вектор `val` уже существует во множестве; <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор; <br />`INVALID_ARGUMENT`, если аргумент имеет недопустимое значение (`NORM::AMOUNT` или `tol < 0.0`); <br />Или информация о невалидности точности: <br />`NOT_NUMBER` - точность является NAN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `remove` | |
|---|---|
| Описание: | Удаляет вектор по индексу. |
| Параметры: | `index` - индекс вектора. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит индексам множества. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `remove` | |
|---|---|
| Описание: | Находит первый вектор, равный данному с некоторой точностью, и удаляет его. |
| Параметры: | `pat` - вектор, который ищет метод, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`VECTOR_NOT_FOUND`, если не удалось найти вектор; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `val` не совпала с размерностью множества; <br />`INVALID_ARGUMENT`, если аргумент имеет недопустимое значение (`NORM::AMOUNT` или `tol < 0.0`); <br />Или информация о невалидности точности: <br />`NOT_NUMBER` - точность является NAN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getIterator` | |
|---|---|
| Описание: | Создаёт итератор множества, соответствующий индексу в множестве. |
| Параметры: | `index` - индекс вектора в множестве. |
| Возвращаемое значение: | Указатель на экземпляр итератора множества или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getBegin` | |
|---|---|
| Описание: | Создаёт итератор множества на начало в множестве. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр множества итератора или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getEnd` | |
|---|---|
| Описание: | Создаёт итератор множества на конец в множестве. Конец - последний добавленный вектор. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр итератора множества или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setlogger). |

## Итератор множества: `ISet::IIterator`

Интерфейс итератора по множеству.

### Описание интерфейса итератора:

| Метод: `getNext` | |
|---|---|
| Описание: | Создаёт итератор множества, сдвинутый на несколько шагов вперёд. |
| Параметры: | `indexInc` - количество шагов, на которое нужно сдвинуть итератор вперёд. |
| Возвращаемое значение: | Указатель на экземпляр итератора множества или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `getPrevious` | |
|---|---|
| Описание: | Создаёт итератор множества, сдвинутый на несколько шагов назад. |
| Параметры: | `indexInc` - количество шагов, на которое нужно сдвинуть итератор назад. |
| Возвращаемое значение: | Указатель на экземпляр итератора множества или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию итератора множества, у которого вызван метод. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр итератора множества или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#setitlogger). |

<a name="setitlogger"></a>

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для итератора множества. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getLogger` | |
|---|---|
| Описание: | Возвращает [логгер](#logger), установленный для итератора множества. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр логгера или `nullptr`, если логгер не был установлен. |

| Метод: `next` | |
|---|---|
| Описание: | Сдвигает итератор множества вперёд. |
| Параметры: | `indexInc` - количество шагов, на которое нужно сдвинуть итератор вперёд. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если полученный итератор множества вышел за границу множества; <br />`SOURCE_SET_DESTROYED`, если множество было уничтожено. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `previous` | |
|---|---|
| Описание: | Сдвигает итератор множества назад. |
| Параметры: | `indexInc` - количество шагов, на которое нужно сдвинуть итератор назад. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если полученный итератор множества вышел за границу множества; <br />`SOURCE_SET_DESTROYED`, если множество было уничтожено. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `isValid` | |
|---|---|
| Описание: | Проверяет валидность итератора множества. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | `true`, если итератор множества ссылается на вектор в множестве, <br />`false`, если итератор множества вышел за границы множества в процессе операции `next`, `previous`. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `makeBegin` | |
|---|---|
| Описание: | Переводит итератор множества в начало множества. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`SOURCE_SET_EMPTY`, если множество пусто; <br />`SOURCE_SET_DESTROYED`, если множество было уничтожено. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `makeEnd` | |
|---|---|
| Описание: | Переводит итератор множества в конец множества. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`SOURCE_SET_EMPTY`, если множество пусто; <br />`SOURCE_SET_DESTROYED`, если множество было уничтожено. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `getVectorCopy` | |
|---|---|
| Описание: | Создаёт копию вектора, на который указывает итератор множества. Метод записывает в переданный по ссылке указатель адрес копии вектора. |
| Параметры: | `val` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `getVectorCoords` | |
|---|---|
| Описание: | Записывает элементы вектора, на который указывает итератор множества, в буферный вектор. |
| Параметры: | `val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `val` не совпала с размерностью вектора, на который ссылается итератор множества. <br />Подробная информация пишется в [логгер](#setitlogger). |

### Замечания по реализации:
- Хранятся не сами векторы, а только существенная часть вектора - массив элементов.
- Изменение размера контейнера при нехватке выделенной памяти выполняется скрыто от клиентского кода во время выполнения метода `insert`. В связи с реалокациями реализацию интерфейса нельзя хранить в виде единого блока памяти (как в случае с вектором). Векторы в контейнере могут храниться в виде единого блока.
- Память выделяется по следующей схеме: изначально выделяется какой-то фиксированный размер, затем при каждой реалокации объём выделенной памяти увеличивается вдвое.
- В связи с реалокациями, скрытыми от пользователя, shallow-копии векторов не возвращаются - получение ресурса сопровождается созданием нового вектора или копированием данных в некоторый буферный вектор (касается методов `get...`, `findFirst...`, метода `get...` итератора).
- Деструкторы чисто виртуальные намеренно, аналогично `IVector`.

### Описание связи итератора и множества:
- В множестве хранится массив уникальных индексов, которые присваиваются векторам при добавлении. Индексы уникальны, поэтому повторяться не могут. После удаления вектора его индекс больше не может быть присвоен другому вектору.
- Каждый итератор множества при конструировании получает от своего множества контрольный блок. Общение итератора и множества происходит через этот контрольный блок, который разделяется между итераторами, подобно тому, как переданный во владение ресурс разделяется между [shared_pointer'ами](https://en.cppreference.com/w/cpp/memory/shared_ptr). Контрольный блок существует до тех пор, пока существует хотя бы один итератор, связанный с ним, или множество, связанное с ним.
- В случае, если множество полностью пустеет, "история" добавления индексов аннулируется: уникальные индексы вновь начинаются с начала.

## Контрольный блок: `ISetControlBlock`

[Интерфейс контрольного блока](https://github.com/ThinkingFrog/IVector/blob/main/include/ISetControlBlock.h).

### Описание интерфейса контрольного блока:

| Метод: `getNext` | |
|---|---|
| Описание: | Реализует получение вектора, отстоящего на несколько шагов вперёд. Новый уникальный индекс будет записан в переменную `index`, полученную по ссылке, а данные вектора будут записаны в буферный вектор. В случае, если операция выводит итератор за границы массива, итератор будет помечен невалидным, а в `index` будет записано максимальное значение. |
| Параметры: | `vec` - буферный вектор, куда будут записаны элементы вектора, запрашиваемого итератором, <br />`index` - уникальный индекс вектора, передаваемый как ссылка на текущий индекс вектора. После получения ресурса этот индекс изменится на новый, соответствующий полученному вектору, <br />`indexInc` - число элементов, на которое хотим сместить итератор вперёд. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если итератор запрашивает данные на элемент за границами множества; <br />`SOURCE_SET_DESTROYED`, если итератор запрашивает данные у множества, которое уничтожено. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getPrevious` | |
|---|---|
| Описание: | Реализует получение вектора, отстоящего на несколько шагов назад. Новый уникальный индекс будет записан в переменную `index`, полученную по ссылке, а данные вектора будут записаны в буферный вектор. В случае, если операция выводит итератор за границы массива, итератор будет помечен невалидным, а в `index` будет записано максимальное значение. |
| Параметры: | `vec` - буферный вектор, куда будут записаны элементы вектора, запрашиваемого итератором, <br />`index` - уникальный индекс вектора, передаваемый как ссылка на текущий индекс вектора. После получения ресурса этот индекс изменится на новый, соответствующий полученному вектору, <br />`indexInc` - число элементов, на которое хотим сместить итератор назад. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если итератор запрашивает данные на элемент за границами множества; <br />`SOURCE_SET_DESTROYED`, если итератор запрашивает данные у множества, которое уничтожено. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getBegin` | |
|---|---|
| Описание: | Реализует получение вектора, расположенного в начале множества. Новый уникальный индекс будет записан в переменную `index`, полученную по ссылке, а данные вектора будут записаны в буферный вектор. |
| Параметры: | `vec` - буферный вектор, куда будут записаны элементы вектора, запрашиваемого итератором, <br />`index` - уникальный индекс вектора, передаваемый как ссылка на текущий индекс вектора. После получения ресурса этот индекс изменится на новый, соответствующий полученному вектору. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`SOURCE_SET_EMPTY`, если множество пусто; <br />`SOURCE_SET_DESTROYED`, если итератор запрашивает данные у множества, которое уничтожено. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getEnd` | |
|---|---|
| Описание: | Реализует получение вектора, расположенного в конце множества. Новый уникальный индекс будет записан в переменную `index`, полученную по ссылке, а данные вектора будут записаны в буферный вектор. |
| Параметры: | `vec` - буферный вектор, куда будут записаны элементы вектора, запрашиваемого итератором, <br />`index` - уникальный индекс вектора, передаваемый как ссылка на текущий индекс вектора. После получения ресурса этот индекс изменится на новый, соответствующий полученному вектору. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`SOURCE_SET_EMPTY`, если множество пусто; <br />`SOURCE_SET_DESTROYED`, если итератор запрашивает данные у множества, которое уничтожено. <br />Подробная информация пишется в [логгер](#setlogger). |

## ICompact

[Интерфейс для n-мерного замкнутого параллелепипеда - компакта](https://github.com/ThinkingFrog/IVector/blob/main/include/ICompact.h) в n-мерном евклидовом пространстве.

Фактически представляет собой сетку, заданную двумя векторами, содержащими информацию о границах параллелепипеда, и вектором с целочисленными компонентами ([мульти-индексом](#multiindex)), который задаёт число узлов сетки по каждой оси.

### Описание интерфейса

| Метод: `createCompact` | |
|---|---|
| Описание:| Создаёт экземпляр компакта.|
| Параметры: | `vec1` и `vec2` - векторы, определяющие границы параллелепипеда. <br />`nodeQuantities` - целочисленный неотрицательный вектор, определяющий количество узлов по каждой оси сетки компакта. |
| Возвращаемое значение:| Указатель на экземпляр компакта или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию компакта, у которого вызван метод. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр компакта или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#compactlogger). |

<a name="compactlogger"></a>

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для компакта. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getLogger` | |
|---|---|
| Описание: | Возвращает [логгер](#logger), установленный для компакта. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр логгера или `nullptr`, если логгер не был установлен. |

| Метод: `createIntersection` | |
|---|---|
| Описание: | Создаёт новый компакт как пересечение двух компактов. Может получиться вырожденный компакт: компакт, который имеет всего один узел по каким-то осям. |
| Параметры: | `op1` и `op2` - компакты для построения пересечения, <br /> `grid` - сетка, которая будет задана на новом компакте, <br />`tol` - точность, с которой будут проверяться на равенство компоненты векторов в случае, когда получается вырожденный компакт. |
| Возвращаемое значение: | Новый компакт, являющийся пересечением, или `nullptr` в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `createCompactSpan` | |
|---|---|
| Описание: | Создаёт новый компакт, содержащий в себе оба переданных компакта ("компактная" оболочка).  |
| Параметры: | `op1` и `op2` - компакты для построения оболочки, <br /> `grid` - сетка, которая будет задана на новом компакте. |
| Возвращаемое значение: | Новый компакт, являющийся оболочкой, или `nullptr` в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `isInside` | |
|---|---|
| Описание: | Проверяет вектор на принадлежность компакту. |
| Параметры: | `vec` - вектор, который проверяется на принадлежность. |
| Возвращаемое значение: | `true`, если вектор принадлежит компакту, и `false`, если не принадлежит. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `getDim` | |
|---|---|
| Описание: | Возвращает размерность векторов в компакте. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Размерность векторов. |

| Метод: `getGrid` | |
|---|---|
| Описание: | Возвращает мульти-индекс, определяющий количество узлов по каждой оси сетки компакта. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на целочисленный вектор или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `getLeftBoundary` | |
|---|---|
| Описание: | Возвращает вектор левейших границ компакта. Метод записывает в переданный по ссылке указатель адрес копии вектора. |
| Параметры: | `vec` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `getRightBoundary` | |
|---|---|
| Описание: | Возвращает вектор правейших границ компакта. Метод записывает в переданный по ссылке указатель адрес копии вектора. |
| Параметры: | `vec` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `getVectorCopy` | |
|---|---|
| Описание: | Возвращает копию вектора по мульти-индексу (узлу сетки компакта). Метод записывает в переданный по ссылке указатель адрес копии вектора. |
| Параметры: | `index` - мульти-индекс вектора, <br />`val` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если мульти-индекс не принадлежит сетке компакта; <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `getVectorCoords` | |
|---|---|
| Описание: | Записывает элементы вектора, соответствующего мульти-индексу (узлу сетки компакта), в буферный вектор. |
| Параметры: | `index` - мульти-индекс вектора, <br />`val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`INDEX_OUT_OF_BOUND`, если мульти-индекс не принадлежит сетке компакта; <br />`MISMATCHING_DIMENSIONS`, если размерность буферного вектора `val` не совпала с размерностью компакта. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `getIterator` | |
|---|---|
| Описание: | Создаёт итератор компакта, соответствующий мульти-индексу в компакте (узлу сетки компакта) с заданным порядком обхода сетки. Подробнее про обход [здесь](#bypassRule). |
| Параметры: | `index` - индекс вектора в множестве, <br />`bypassOrder` - мульти-индекс, определяющий порядок обхода осей. |
| Возвращаемое значение: | Указатель на экземпляр итератора компакта или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `getBegin` | |
|---|---|
| Описание: | Создаёт итератор компакта на начало в компакте с заданным порядком обхода сетки. Подробнее про обход [здесь](#bypassRule). Началом компакта считается вектор левейших границ компакта. |
| Возвращаемое значение: | Указатель на экземпляр итератора компакта или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `getEnd` | |
|---|---|
| Описание: | Создаёт итератор компакта на конец в компакте с заданным порядком обхода сетки. Подробнее про обход [здесь](#bypassRule). Концом компакта считается вектор правейших границ компакта.  |
| Возвращаемое значение: | Указатель на экземпляр итератора компакта или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#compactlogger). |

## Итератор компакта: `ICompact::IIterator`

Интерфейс итератора по компакту. Итератор по компакту реализует возможность полного обхода всех узлов компакта.

<a name="bypassRule"></a>

В случае, когда размерность объемлющего пространства не равна единице, становится не очевидно в каком порядке нужно обходить узлы такой сетки. Поэтому каждый итератор при конструировании параметризуется __порядком обхода осей__: задаётся мульти-индекс, компоненты которого являются номерами осей.

Например, мульти-индекс `[3, 2, 4, 1, 0]` задаёт обход таким образом, что при инкрементации позиции итератора первым делом будет произведена попытка инкрементировать позицию по третьей оси, затем, если не удалось инкрементировать по третьей оси, происходит попытка инкрементации по второй оси и так далее. В случае успешной инкрементации итератор возвращается в начало по всем осям, по которым инкрементация не удалась.
Перебор полностью подобен тому, как мы перечисляем натуральные числа: после 1999, мы инкрементируем новый разряд, а предыдущие разряды обнуляются, получаем 2000.

### Описание интерфейса итератора:

| Метод: `getNext` | |
|---|---|
| Описание: | Создаёт итератор компакта, сдвинутый на шаг вперёд. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр итератора компакта или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#compactitlogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию итератора компакта, у которого вызван метод. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр итератора компакта или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#compactitlogger). |

 <a name="compactitlogger"></a>

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для итератора компакта. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getLogger` | |
|---|---|
| Описание: | Возвращает [логгер](#logger), установленный для итератора компакта. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр логгера или `nullptr`, если логгер не был установлен. |

| Метод: `next` | |
|---|---|
| Описание: | Сдвигает итератор компакта вперёд. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если полученный итератор компакта вышел за границу компакта. <br />Подробная информация пишется в [логгер](#compactitlogger). |

| Метод: `isValid` | |
|---|---|
| Описание: | Проверяет валидность итератора компакта. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | `true`, если итератор компакта ссылается на вектор в компакте, <br />`false`, если итератор компакта вышел за границы компакта в процессе операции `next`. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#compactitlogger). |

| Метод: `getVectorCopy` | |
|---|---|
| Описание: | Создаёт копию вектора, на который указывает итератор компакта. Метод записывает в переданный по ссылке указатель адрес копии вектора. |
| Параметры: | `val` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор. <br />Подробная информация пишется в [логгер](#compactitlogger). |

| Метод: `getVectorCoords` | |
|---|---|
| Описание: | Записывает элементы вектора, на который указывает итератор компакта, в буферный вектор. |
| Параметры: | `val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `val` не совпала с размерностью вектора, на который ссылается итератор компакта. <br />Подробная информация пишется в [логгер](#compactitlogger). |

### Замечания по интерфейсу:
- Деструкторы чисто виртуальные намеренно, аналогично `IVector`.

### Описание связи итератора и компакта:
- Каждый итератор компакта при конструировании получает от своего компакта контрольный блок. Общение итератора и компакта происходит через этот контрольный блок, который разделяется между итераторами. Контрольный блок существует до тех пор, пока существует хотя бы один итератор, связанный с ним, или компакта, связанный с ним.

## Контрольный блок: `ICompactControlBlock`

[Интерфейс контрольного блока](https://github.com/ThinkingFrog/IVector/blob/main/include/ICompactControlBlock.h).

### Описание интерфейса контрольного блока:

| Метод: `get` | |
|---|---|
| Описание: | Реализует смещение итератора на шаг вперёд. Новый мульти-индекс будет записан в переменную `index`. |
| Параметры: | `index` - мульти-индекс вектора, передаваемый как указатель на текущий мульти-индекс вектора. После смещения этот индекс изменится на новый, соответствующий новой позиции, <br />`bypassOrder` - мульти-индекс, определяющий порядок обхода осей. Подробнее про обход [здесь](#bypassRule). |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если итератор смещаяется за границу компакта; <br />`SOURCE_COMPACT_DESTROYED`, если итератор запрашивает данные у компакта, который уничтожен. <br />Подробная информация пишется в [логгер](#compactlogger). |

| Метод: `get` | |
|---|---|
| Описание: | Записывает элементы вектора, соответствующего мульти-индексу, в буферный вектор. |
| Параметры: | `index` - мульти-индекс вектора, <br />`val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`INDEX_OUT_OF_BOUND`, если мульти-индекс не принадлежит сетке компакта; <br />`MISMATCHING_DIMENSIONS`, если размерность буферного вектора `val` не совпала с размерностью компакта. <br />Подробная информация пишется в [логгер](#compactlogger). |

## <a name="multiindex"></a>IMultiIndex

[Интерфейс](https://github.com/ThinkingFrog/IVector/blob/main/include/IMultiIndex.h) [мульти-индекса](https://youtu.be/RiVJO8o13vI?t=36) - вектора с целочисленными неотрицательными компонентами.

### Аксиомы типа:
- элементы - `size_t` - не могут быть меньше `0`.
- размерность пространства, которому принадлежит вектор, не может быть меньше или равна `0`.

Аксиомы должны выполняться в любой момент времени (например, после выполнения любой операции над мульти-индексом). Если некая операция приводит к образованию мульти-индекса с невалидными коэффициентами, то такая операция должна вернуть исходное состояние мульти-индекса, либо, если она создавала новый мульти-индекс, вместо нового мульти-индекс выдать `nullptr`.

### Описание интерфейса:

| Метод: `createMultiIndex` | |
|---|---|
| Описание:| Создаёт экземпляр мульти-индекса.|
| Параметры: | `dim` - размерность мульти-индекса, <br />`ptr_data` - указатель на массив `size_t`, который определяет элементы мульти-индекса. Его размер равен `dim`. |
| Возвращаемое значение:| Указатель на экземпляр мульти-индекса или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#indexlogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию мульти-индекса, у которого вызван метод. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр мульти-индекса или `nullptr`, если не удалось выделить память. <br />Подробная информация пишется в [логгер](#indexlogger). |

| Метод: `getData` | |
|---|---|
| Описание: | Возвращает указатель на массив элементов мульти-индекса. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на неизменяемый массив `size_t` - элементы мульти-индекса. |

| Метод: `setData` | |
|---|---|
| Описание: | Устанавливает новые значения элементов мульти-индекса. |
| Параметры: | `dim` - количество элементов массива, <br />`ptr_data` - указатель на массив `size_t`, который определяет новые элементы мульти-индекса. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность мульти-индекса не совпала с размером массива. <br />Подробная информация пишется в [логгер](#indexlogger). |

<a name="indexlogger"></a>

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для мульти-индекса. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getLogger` | |
|---|---|
| Описание: | Возвращает [логгер](#logger), установленный для мульти-индекса. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр логгера или `nullptr`, если логгер не был установлен. |

| Метод: `getAxisIndex` | |
|---|---|
| Описание: | Записывает конкретную компоненту мульти-индекса в переменную, переданную по ссылке. |
| Параметры: | `index` - индекс элемента мульти-индекса, <br />`val` - ссылка на `size_t` - контейнер под элемент вектора. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит множеству индексов мульти-индекса. <br />Подробная информация пишется в [логгер](#indexlogger). |

| Метод: `setAxisIndex` | |
|---|---|
| Описание: | Устанавливает конкретной компоненте мульти-индекса новое значение. |
| Параметры: | `index` - индекс элемента мульти-индекса, <br />`val` - новое значение элемента. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит множеству индексов мульти-индекса. <br />Подробная информация пишется в [логгер](#indexlogger). |

| Метод: `getDim` | |
|---|---|
| Описание: | Возвращает размерность мульти-индекса. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Размерность мульти-индекса. |

| Метод: `incAxisIndex` | |
|---|---|
| Описание: | Инкрементирует конкретную компоненту мульти-индекса. |
| Параметры: | `index` - индекс компоненты мульти-индекса, <br />`val` - величина, на которую нужно инкрементировать компоненту. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; Или информация о невалидности получаемой компоненты: <br />`INVALID_ARGUMENT`, если компонента становится меньше нуля. <br />Подробная информация пишется в [логгер](#indexlogger). |

### Замечания по реализации:
- Деструктор чисто виртуальный намеренно, аналогично `IVector`.

## <a name="function"></a>IProblem

[Интерфейс целевой функции](https://github.com/ThinkingFrog/IVector/blob/main/include/IProblem.h).

Определяется двумя компактами: областью определения аргумента и подмножеством параметрического пространства. Конкретная функция определяется в реализации типа.

### Описание интерфейса:

| Метод: `createProblem` | |
|---|---|
| Описание:| Создаёт экземпляр целевой функции.|
| Параметры: | Параметров нет. |
| Возвращаемое значение:| Указатель на экземпляр целевой функции или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#funclogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию целевой функции, у которой вызван метод. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр целевой функции или `nullptr`, если не удалось выделить память. <br />Подробная информация пишется в [логгер](#funclogger). |

| Метод: `setArgsDomain` | |
|---|---|
| Описание:| Задаёт область определения целевой функции.|
| Параметры: | `args` - компакт, определяющий область определения аргумента, <br />`logger` - указатель на логгер. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`ALLOCATION_ERROR` в случае, если не удалось выделить память под компакт; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. <br />Подробная информация пишется в [логгер](#funclogger), если тот был уже задан. |

| Метод: `setParamsDomain` | |
|---|---|
| Описание:| Задаёт подмножество параметрического пространства целевой функции.|
| Параметры: | `params` - компакт, определяющий подмножество параметрического пространства целевой функции. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`ALLOCATION_ERROR` в случае, если не удалось выделить память под компакт; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. <br />Подробная информация пишется в [логгер](#funclogger). |

<a name="funclogger"></a>

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для целевой функции. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getLogger` | |
|---|---|
| Описание: | Возвращает [логгер](#logger), установленный для целевой функции. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр логгера или `nullptr`, если логгер не был установлен. |

| Метод: `isValidParams` | |
|---|---|
| Описание: | Проверяет вектор на принадлежность множеству параметров целевой функции. |
| Параметры: | `params` - вектор, который проверяется на принадлежность. |
| Возвращаемое значение: | `true`, если вектор принадлежит параметрам, и `false`, если не принадлежит. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#funclogger). |

| Метод: `isValidArgs` | |
|---|---|
| Описание: | Проверяет вектор на принадлежность множеству аргументов целевой функции. |
| Параметры: | `args` - вектор, который проверяется на принадлежность. |
| Возвращаемое значение: | `true`, если вектор принадлежит аргументам, и `false`, если не принадлежит. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#funclogger). |

| Метод: `setParams` | |
|---|---|
| Описание: | Фиксирует параметры целевой функции для последующего вычисления значения функции по аргументу. |
| Параметры: | `params` - вектор параметров. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если вектор параметров не принадлежит множеству параметров целевой функции; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `params` не совпала с размерностью компакта параметров. <br />Подробная информация пишется в [логгер](#funclogger). |

| Метод: `setArgs` | |
|---|---|
| Описание: | Фиксирует аргументы целевой функции для последующего вычисления значения функции по параметрам. |
| Параметры: | `args` - вектор аргументов. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если вектор аргументов не принадлежит множеству определения целевой функции; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `args` не совпала с размерностью компакта аргументов. <br />Подробная информация пишется в [логгер](#funclogger). |

| Метод: `evalByArgs` | |
|---|---|
| Описание: | Вычисляет значение целевой функции по аргументу. Параметры должны быть зафиксированны ранее. |
| Параметры: | `args` - вектор аргументов. |
| Возвращаемое значение: | Значение целевой функции или тихий NAN в случае ошибки. <br />Подробная информация пишется в [логгер](#funclogger). |

| Метод: `evalByParams` | |
|---|---|
| Описание: | Вычисляет значение целевой функции по параметрам. Аргументы должны быть зафиксированны ранее. |
| Параметры: | `params` - вектор параметров. |
| Возвращаемое значение: | Значение целевой функции или тихий NAN в случае ошибки. <br />Подробная информация пишется в [логгер](#funclogger). |


<a name="dfuncreason"></a>

### Замечания по реализации:
- Деструктор чисто виртуальный намеренно, аналогично `IVector`.
- Библиотека, реализующая этот тип должна реализовывать также [тип `IBroker`](#broker), для реализации возможности межмодульного общения.
- В силу ограниченности интерфейса `IBrocker` метод `setArgsDomain` имеет дополнительным параметром указатель на логгер, чтобы была возможность задать этот самый логгер в случае, если обратиться к статическому методу `setLogger` невозможно.

## IDiffProblem

[Интерфейс дифференцируемой целевой функции](https://github.com/ThinkingFrog/IVector/blob/main/include/IDiffProblem.h). Наследуется от интерфейса [целевой функции](#function).

Определяется двумя компактами: областью определения аргумента и подмножеством параметрического пространства. Конкретная функция определяется в реализации типа.

### Описание интерфейса:

| Метод: `createProblem` | |
|---|---|
| Описание:| Создаёт экземпляр дифференцируемой целевой функции.|
| Параметры: | Параметров нет. |
| Возвращаемое значение:| Указатель на экземпляр дифференцируемой целевой функции или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию дифференцируемой целевой функции, у которой вызван метод. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр дифференцируемой целевой функции или `nullptr`, если не удалось выделить память. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `setArgsDomain` | |
|---|---|
| Описание:| Задаёт область определения дифференцируемой целевой функции.|
| Параметры: | `args` - компакт, определяющий область определения аргумента, <br />`logger` - указатель на логгер. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`ALLOCATION_ERROR` в случае, если не удалось выделить память под компакт; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. <br />Подробная информация пишется в [логгер](#funclogger), если тот был уже задан. |

| Метод: `setParamsDomain` | |
|---|---|
| Описание:| Задаёт подмножество параметрического пространства дифференцируемой целевой функции.|
| Параметры: | `params` - компакт, определяющий подмножество параметрического пространства дифференцируемой целевой функции. |
| Возвращаемое значение:| Код состояния: <br />`SUCCESS` в случае успеха; <br />`ALLOCATION_ERROR` в случае, если не удалось выделить память под компакт; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. <br />Подробная информация пишется в [логгер](#funclogger). |

<a name="dfunclogger"></a>

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для дифференцируемой целевой функции. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getLogger` | |
|---|---|
| Описание: | Возвращает [логгер](#logger), установленный для дифференцируемой целевой функции. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр логгера или `nullptr`, если логгер не был установлен. |

| Метод: `isValidParams` | |
|---|---|
| Описание: | Проверяет вектор на принадлежность множеству параметров дифференцируемой целевой функции. |
| Параметры: | `params` - вектор, который проверяется на принадлежность. |
| Возвращаемое значение: | `true`, если вектор принадлежит параметрам, и `false`, если не принадлежит. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `isValidArgs` | |
|---|---|
| Описание: | Проверяет вектор на принадлежность множеству аргументов дифференцируемой целевой функции. |
| Параметры: | `args` - вектор, который проверяется на принадлежность. |
| Возвращаемое значение: | `true`, если вектор принадлежит аргументам, и `false`, если не принадлежит. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `setParams` | |
|---|---|
| Описание: | Фиксирует параметры дифференцируемой целевой функции для последующего вычисления значения функции или производной по аргументу. |
| Параметры: | `params` - вектор параметров. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если вектор параметров не принадлежит множеству параметров целевой функции; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `params` не совпала с размерностью компакта параметров. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `setArgs` | |
|---|---|
| Описание: | Фиксирует аргументы дифференцируемой целевой функции для последующего вычисления значения функции или производной по параметрам. |
| Параметры: | `args` - вектор аргументов. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если вектор аргументов не принадлежит множеству определения целевой функции; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `args` не совпала с размерностью компакта аргументов. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `evalByArgs` | |
|---|---|
| Описание: | Вычисляет значение дифференцируемой целевой функции по аргументу. Параметры должны быть зафиксированны ранее. |
| Параметры: | `args` - вектор аргументов. |
| Возвращаемое значение: | Значение дифференцируемой целевой функции или тихий NAN в случае ошибки. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `evalByParams` | |
|---|---|
| Описание: | Вычисляет значение дифференцируемой целевой функции по параметрам. Аргументы должны быть зафиксированны ранее. |
| Параметры: | `params` - вектор параметров. |
| Возвращаемое значение: | Значение дифференцируемой целевой функции или тихий NAN в случае ошибки. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `evalDerivativeByArgs` | |
|---|---|
| Описание: | Вычисляет значение производной дифференцируемой целевой функции по аргументу. Параметры должны быть зафиксированны ранее. |
| Параметры: | `args` - вектор аргументов, <br />`index` - мульти-индекс, определяющий производную n-мерной функции, как показано например [здесь](https://ru.wikipedia.org/wiki/%D0%94%D0%B8%D1%84%D1%84%D0%B5%D1%80%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80#%D0%94%D0%B8%D1%84%D1%84%D0%B5%D1%80%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80%D1%8B_%D0%B2_%D1%87%D0%B0%D1%81%D1%82%D0%BD%D1%8B%D1%85_%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%BD%D1%8B%D1%85) или [здесь](https://youtu.be/RiVJO8o13vI?t=288). |
| Возвращаемое значение: | Значение частной производной дифференцируемой целевой функции или тихий NAN в случае ошибки. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `evalDerivativeByParams` | |
|---|---|
| Описание: | Вычисляет значение производной дифференцируемой целевой функции по параметрам. Аргументы должны быть зафиксированны ранее. |
| Параметры: | `params` - вектор параметров, <br />`index` - мульти-индекс, определяющий производную n-мерной функции, как показано например [здесь](https://ru.wikipedia.org/wiki/%D0%94%D0%B8%D1%84%D1%84%D0%B5%D1%80%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80#%D0%94%D0%B8%D1%84%D1%84%D0%B5%D1%80%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80%D1%8B_%D0%B2_%D1%87%D0%B0%D1%81%D1%82%D0%BD%D1%8B%D1%85_%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%BD%D1%8B%D1%85) или [здесь](https://youtu.be/RiVJO8o13vI?t=288). |
| Возвращаемое значение: | Значение частной производной дифференцируемой целевой функции или тихий NAN в случае ошибки. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `evalGradientByArgs` | |
|---|---|
| Описание: | Вычисляет значение градиента дифференцируемой целевой функции по аргументу. Параметры должны быть зафиксированны ранее. Градиент записывается в буферный вектор. |
| Параметры: | `args` - вектор аргументов, <br />`val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если вектор аргументов не принадлежит множеству определения целевой функции, <br />`NO_PARAMS_SET`, если вектор параметров не был установлен ранее; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `args` или `val` не совпала с размерностью компакта аргументов. <br />Подробная информация пишется в [логгер](#dfunclogger). |

| Метод: `evalGradientByParams` | |
|---|---|
| Описание: | Вычисляет значение градиента дифференцируемой целевой функции по параметрам. Аргументы должны быть зафиксированны ранее. Градиент записывается в буферный вектор. |
| Параметры: | `params` - вектор параметров, <br />`val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если вектор параметров не принадлежит множеству параметров целевой функции, <br />`NO_ARGS_SET`, если вектор аргументов не был установлен ранее; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `params` не совпала с размерностью компакта параметров, или размерность `val` не совпала с размерностью компакта аргументов. <br />Подробная информация пишется в [логгер](#dfunclogger). |

### Замечания по реализации:
- Все производные берутся только по аргументам.
- Деструктор чисто виртуальный намеренно, аналогично `IVector`.
- Библиотека, реализующая этот тип должна реализовывать также [тип `IBroker`](#broker).
- В силу уже описанных в интерфейсе целевой функции [причин](#dfuncreason) метод `setArgsDomain` имеет дополнительным параметром указатель на логгер.

## ISolver

[Интерфейс решателя](https://github.com/ThinkingFrog/IVector/blob/main/include/ISolver.h) задачи локальной оптимизации.

### Описание интерфейса:

| Метод: `createSolver` | |
|---|---|
| Описание:| Создаёт экземпляр решателя.|
| Параметры: | Параметров нет. |
| Возвращаемое значение:| Указатель на экземпляр решателя или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#sollogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию решателя, у которой вызван метод. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр решателя или `nullptr`, если не удалось выделить память. <br />Подробная информация пишется в [логгер](#sollogger). |

<a name="sollogger"></a>

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для решателя. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `pLogger` - указатель на логгер. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getLogger` | |
|---|---|
| Описание: | Возвращает [логгер](#logger), установленный для решателя. |
| Параметры: | Параметров нет. |
| Возвращаемое значение: | Указатель на экземпляр логгера или `nullptr`, если логгер не был установлен. |

| Метод: `isValidParamsDomain` | |
|---|---|
| Описание: | Проверяет компакт на принадлежность множеству параметров целевой функции. |
| Параметры: | `params` - компакт, который проверяется на принадлежность. |
| Возвращаемое значение: | `true`, если компакт принадлежит параметрам, и `false`, если не принадлежит. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#sollogger). |

| Метод: `isValidArgsDomain` | |
|---|---|
| Описание: | Проверяет компакт на принадлежность множеству аргументов целевой функции. |
| Параметры: | `args` - компакт, который проверяется на принадлежность. |
| Возвращаемое значение: | `true`, если компакт принадлежит аргументам, и `false`, если не принадлежит. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#sollogger). |

| Метод: `setParamsDomain` | |
|---|---|
| Описание: | Устанавливает подмножество параметров для решения задачи оптимизации. |
| Параметры: | `params` - компакт параметров. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если компакт параметров не принадлежит множеству параметров целевой функции; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность компакта `params` не совпала с размерностью компакта параметров целевой функции; <br />`NO_PROBLEM_SET`, если функция цели ещё не была задана. <br />Подробная информация пишется в [логгер](#sollogger). |

| Метод: `setArgsDomain` | |
|---|---|
| Описание: | Устанавливает подмножество аргументов для решения задачи оптимизации. |
| Параметры: | `args` - компакт аргументов. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если компакт аргументов не принадлежит множеству определения целевой функции; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность компакта `args` не совпала с размерностью компакта аргументов целевой функции; <br />`NO_PROBLEM_SET`, если функция цели ещё не была задана. <br />Подробная информация пишется в [логгер](#sollogger). |

| Метод: `setProblem` | |
|---|---|
| Описание: | Устанавливает функцию цели. |
| Параметры: | `pProblem` - функция цели. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. <br />Подробная информация пишется в [логгер](#sollogger). |

| Метод: `solveByArgs` | |
|---|---|
| Описание: | Решает задачу с заданными условиями по аргументу (находит оптимальный аргумент). |
| Параметры: | `initArg` - вектор начального приближения аргументов, <br /> `solverParams` - параметры решателя специфичные для конкретной реализация (должны быть описаны разработчиком реализации). |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если параметры решателя оказались невалидными; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `initArg` не совпала с размерностью аргументов функции цели; <br />`NO_PROBLEM_SET`, если функция цели не была задана; <br />`NO_ARGS_SET`, если подмножество аргументов не было задано. <br />Подробная информация пишется в [логгер](#sollogger). |

| Метод: `solveByParams` | |
|---|---|
| Описание: | Решает задачу с заданными условиями по параметру (находит оптимальный параметр). |
| Параметры: | `initParam` - вектор начального приближения параметров, <br /> `solverParams` - параметры решателя специфичные для конкретной реализация (должны быть описаны разработчиком реализации). |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`INVALID_ARGUMENT`, если параметры решателя оказались невалидными; <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`; <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `initParam` не совпала с размерностью параметров функции цели; <br />`NO_PROBLEM_SET`, если функция цели не была задана; <br />`NO_PARAMS_SET`, если подмножество параметров не было задано. <br />Подробная информация пишется в [логгер](#sollogger). |

| Метод: `getSolution` | |
|---|---|
| Описание: | Возвращает копию вектора решения задачи. Метод записывает в переданный по ссылке указатель адрес копии вектора или `nullptr`, если решение ещё не получено. |
| Параметры: | `val` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код состояния: <br />`SUCCESS` в случае успеха; <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор. <br />Подробная информация пишется в [логгер](#sollogger). |

### Замечания по реализации:
- Деструктор чисто виртуальный намеренно, аналогично `IVector`.
- Библиотека, реализующая этот тип должна реализовывать также [тип `IBroker`](#broker).
- В силу всё тех же [причин](#dfuncreason), уже описанных в интерфейсе целевой функции, метод `setArgsDomain` имеет дополнительным параметром указатель на логгер.

## <a name="broker"></a>IBroker

[Интерфейс вспомогательной структуры](https://github.com/ThinkingFrog/IVector/blob/main/include/IBroker.h), которая осуществляет доступ к реализации типов данных. Этот интерфейс должны реализовывать динамические библиотеки, реализующие `ISolver`, `IProblem` и `IDiffProblem`.

### Описание интерфейса:

| Метод: `getBroker` | |
|---|---|
| Описание:| Создаёт экземпляр брокера. |
| Параметры: | Параметров нет. |
| Возвращаемое значение:| Указатель на экземпляр брокера или `nullptr`, если не удалось создать. |

| Метод: `canCastTo` | |
|---|---|
| Описание:| Проверяет содержит ли библиотека реализацию конкретного типа данных.  |
| Параметры: | `impl` - обозначение типа из [перечисления поддерживаемых типов данных `INTERFACE_IMPL`](#types). |
| Возвращаемое значение:| `true`, если библиотека содержит реализацию, и `false`, если не содержит. В случае ошибки также возвращается `false`. |

| Метод: `getInterfaceImpl` | |
|---|---|
| Описание:| Реализует получение экземпляра типа данных.  |
| Параметры: | `impl` - обозначение типа из [перечисления поддерживаемых типов данных `INTERFACE_IMPL`](#types). |
| Возвращаемое значение:| Указатель на экземпляр типа или `nullptr`, если не удалось создать. |

| Метод: `release` | |
|---|---|
| Описание:| Удаляет экземпляр брокера. |
| Параметры: | Параметров нет. |
| Возвращаемое значение:| Возвращаемого значения нет. |

<a name="types"></a>

| Перечисление: `INTERFACE_IMPL` | |
|---|---|
| Описание: | Описывает поддерживаемые типы. |
| Элементы: | `IPROBLEM` - обозначение для типа целевой функции; <br />`ISOLVER` - обозначение для типа решателя; <br />`TOTAL_INTERFACE_IMPL` - общее число поддерживаемых типов. |

### Замечания по реализации:
- Деструктор чисто виртуальный намеренно, аналогично `IVector`.
- Метод `getBroker` явно не объявлен в [заголовочном файле](https://github.com/ThinkingFrog/IVector/blob/main/include/IBroker.h), так как отсутствует необходимость в объявлении. Обращение к методу если и будет происходить, то через средства работы с динамическими библиотеками (см. [`dlopen`](https://man7.org/linux/man-pages/man3/dlopen.3.html)/[`GetProcAddress`](https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress)). Метод должен быть экспортирован библиотекой (должен быть помечан `LIB_EXPORT`), а также необходимо для бинарной совместимости компилировать как обычную си функцию (см. [`extern "C"`](https://docs.microsoft.com/en-us/cpp/cpp/extern-cpp?view=msvc-160#extern-c-and-extern-c-function-declarations)).
